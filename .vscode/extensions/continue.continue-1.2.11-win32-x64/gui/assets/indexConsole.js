import{r as p,v as L,j as e,F as O,a as D,b as P,c as G,d as A,e as U,R as z,f as _}from"./XCircleIcon.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"a1aa37115ec1156de8f9217b40c5292dd35f6aeb"}}catch{}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new t.Error().stack;r&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[r]="833c8f87-1703-4fa3-b1d1-d662654b2c27",t._sentryDebugIdIdentifier="sentry-dbid-833c8f87-1703-4fa3-b1d1-d662654b2c27")})()}catch{}const M=32;function H(t,r){let s=t.results[t.results.length-1];s==null||s.length==M?t.results.push([r]):s.push(r)}function J(t){t.results;let r=t.results[t.results.length-1],s;return r==null||r.length==M?s=[...t.results]:(s=t.results.slice(0,-1),s.push([...r])),{...t,results:s}}function $(t,r){const s=t.interactions,o=new Map;let n=t.order,l=!1;for(const c of r){let a=o.get(c.interactionId);if(a===void 0){const i=s.get(c.interactionId);i?a=J(i):(a={results:[]},l?n.push(c.interactionId):(n=[...n,c.interactionId],l=!0)),o.set(c.interactionId,a)}switch(c.kind){case"startChat":case"startComplete":case"startFim":a.start=c;break;case"chunk":case"message":H(a,c);break;case"success":case"error":case"cancel":a.end=c;break}}for(const c of s.keys())o.has(c)||o.set(c,s.get(c));return{loading:!1,interactions:o,order:n}}function V(t,r){const s=new Map(t.interactions);s.delete(r);const o=t.order.filter(n=>n!==r);return{loading:!1,interactions:s,order:o}}function q(){const[t,r]=p.useReducer((s,o)=>{switch(o.type){case"init":return $(s,o.items);case"item":return $(s,[o.item]);case"remove":return V(s,o.interactionId);case"clear":return{loading:!1,interactions:new Map,order:[]}}},{loading:!0,interactions:new Map,order:[]});return p.useEffect(function(){const s=L(),o=n=>{n.data.uuid===s&&r(n.data)};return window.addEventListener("message",o),vscode.postMessage({type:"start",uuid:s}),()=>{vscode.postMessage({type:"stop",uuid:s}),window.removeEventListener("message",o)}},[]),t}function X(t,r){const s=t.toLowerCase(),o={"claude-3-opus":{input:15,output:75,cacheWrite:18.75,cacheRead:1.5},"claude-3-opus-20240229":{input:15,output:75,cacheWrite:18.75,cacheRead:1.5},"claude-3-5-sonnet":{input:3,output:15,cacheWrite:3.75,cacheRead:.3},"claude-3-5-sonnet-20241022":{input:3,output:15,cacheWrite:3.75,cacheRead:.3},"claude-3-5-sonnet-20240620":{input:3,output:15,cacheWrite:3.75,cacheRead:.3},"claude-3-5-haiku":{input:.8,output:4,cacheWrite:1,cacheRead:.08},"claude-3-5-haiku-20241022":{input:.8,output:4,cacheWrite:1,cacheRead:.08},"claude-3-haiku":{input:.25,output:1.25,cacheWrite:.3,cacheRead:.03},"claude-3-haiku-20240307":{input:.25,output:1.25,cacheWrite:.3,cacheRead:.03}};let n=o[s];if(!n){for(const[u,h]of Object.entries(o))if(s.includes(u)||u.includes(s)){n=h;break}}if(n||(s.includes("opus")?n=o["claude-3-opus"]:s.includes("sonnet")?n=o["claude-3-5-sonnet"]:s.includes("haiku")&&(n=o["claude-3-5-haiku"])),!n)return null;const l=r.promptTokens/1e6*n.input,c=r.completionTokens/1e6*n.output,a=[];r.promptTokens>0&&a.push(`Input: ${r.promptTokens.toLocaleString()} tokens × $${n.input}/MTok = $${l.toFixed(6)}`),r.completionTokens>0&&a.push(`Output: ${r.completionTokens.toLocaleString()} tokens × $${n.output}/MTok = $${c.toFixed(6)}`);let i=0;if(r.promptTokensDetails){const{cachedTokens:u,cacheWriteTokens:h}=r.promptTokensDetails;if(h&&h>0){const f=h/1e6*n.cacheWrite;i+=f,a.push(`Cache Write: ${h.toLocaleString()} tokens × $${n.cacheWrite}/MTok = $${f.toFixed(6)}`)}if(u&&u>0){const f=u/1e6*n.cacheRead;i+=f,a.push(`Cache Read: ${u.toLocaleString()} tokens × $${n.cacheRead}/MTok = $${f.toFixed(6)}`)}}const m=l+c+i;let d=`Model: ${t}
`;return d+=a.join(`
`),a.length>1&&(d+=`
Total: $${m.toFixed(6)}`),{cost:m,breakdown:d}}function I(t,r,s){switch(t){case"anthropic":return X(r,s);default:return null}}function W(t){return p.useMemo(()=>{var d,u,h,f,x;if(t.start==null)return{result:"",type:""};const r=t.start.kind.slice(5);let s;switch((d=t.end)==null?void 0:d.kind){case"cancel":s="Cancelled";break;case"error":s="Error";break;case"success":s="Success";break;case void 0:s=""}let o,n,l,c,a,i;if(t.start!=null&&t.results.length>0){const g=t.results[0],b=g?g[0]:void 0;n=b?b.timestamp-t.start.timestamp:void 0}if(t.end!=null)o=t.end.timestamp-t.start.timestamp,c=t.end.promptTokens,a=t.end.generatedTokens,i=t.end.thinkingTokens,n!=null&&(l=(a+i)/((o-n)/1e3));else{const g=t.results[t.results.length-1],b=g?g[g.length-1]:void 0;o=b?b.timestamp-t.start.timestamp:void 0}let m=null;return(u=t.end)!=null&&u.usage&&((h=t.start)!=null&&h.provider)&&((x=(f=t.start)==null?void 0:f.options)!=null&&x.model)&&(m=I(t.start.provider,t.start.options.model,t.end.usage)),{result:s,type:r,totalTime:o,toFirstToken:n,tokensPerSecond:l,promptTokens:c,generatedTokens:a,thinkingTokens:i,costBreakdown:m}},[t])}function Y({item:t}){switch(t.kind){case"success":return e.jsx(e.Fragment,{});case"error":return e.jsxs("div",{children:[e.jsx("span",{className:"text-[color:var(--vscode-statusBarItem-errorForeground) m-0.5 inline-block rounded-sm bg-[color:var(--vscode-statusBarItem-errorBackground)] p-0.5",children:"Error"}),t.message]});case"cancel":return e.jsx("div",{children:e.jsx("span",{className:"text-[color:var(--vscode-statusBarItem-warningForeground) m-0.5 inline-block rounded-sm bg-[color:var(--vscode-statusBarItem-warningBackground)] p-0.5",children:"Cancelled"})})}}function y(t){return e.jsx("span",{className:"whitespace-pre-wrap",children:t})}function N(t){return e.jsx("div",{children:e.jsx("span",{className:"bg-[color:var(--vscode-list-inactiveSelectionBackground)] text-xs",children:t})})}function S(t){return typeof t.content=="string"?y(t.content):t.content.map(r=>r.type=="text"?y(r.text):e.jsxs("div",{children:["Image: ",r.imageUrl.url]}))}function F(t,r){switch(t.role){case"assistant":return e.jsxs(e.Fragment,{children:[r?N(t.role):"",t.toolCalls?t.toolCalls.map(s=>e.jsxs("pre",{children:["Tool call: ",JSON.stringify(s,void 0,2)]},s.id)):"",S(t)]});case"thinking":return e.jsxs(e.Fragment,{children:[r?N(t.role):"",t.toolCalls?t.toolCalls.map(s=>e.jsxs("pre",{children:["Tool call: ",JSON.stringify(s,void 0,2)]})):"",S(t),t.redactedThinking&&e.jsxs("pre",{children:["Redacted Thinking: ",t.redactedThinking]}),t.signature&&e.jsxs("pre",{children:["Signature: ",t.signature]})]});case"user":return e.jsxs(e.Fragment,{children:[r?N(t.role):"",S(t)]});case"system":return e.jsxs(e.Fragment,{children:[r?N(t.role):"",y(t.content)]});case"tool":return e.jsxs(e.Fragment,{children:[r?N(t.role):"",e.jsxs("pre",{children:["Tool Call ID: ",t.toolCallId]}),y(t.content)]})}}const K=p.memo(function({message:r}){return F(r,!0)}),Q=p.memo(function({result:r,prevResult:s}){switch(r.kind){case"chunk":return e.jsx("span",{children:r.chunk});case"message":switch(r.message.role){case"assistant":case"thinking":const o=!((s==null?void 0:s.kind)==="message"&&s.message.role===r.message.role);return F(r.message,o);default:return e.jsx("div",{className:"border-[color:var(--vscode-panel-border) border-2 border-solid p-1",children:F(r.message,!0)})}break}}),Z=p.memo(function({group:r}){return e.jsx(e.Fragment,{children:r.map((s,o)=>e.jsx(Q,{result:s,prevResult:r[o-1]},`${s.timestamp}-${o}`))})});function k({label:t,children:r}){const[s,o]=p.useState(!1);return e.jsxs("div",{children:[e.jsxs("div",{className:"text-base",onClick:()=>o(!s),children:[s?e.jsx(O,{className:"h-[16px] w-[16px]"}):e.jsx(D,{className:"h-[16px] w-[16px]"})," ",e.jsx("span",{className:"align-top text-sm font-bold",children:t})]}),s&&e.jsx("div",{children:r})]})}function ee({item:t}){return e.jsx("div",{className:"border-0 border-b-2 border-solid border-[color:var(--vscode-panel-border)] p-1",children:(()=>{switch(t.kind){case"startChat":return e.jsxs(e.Fragment,{children:[e.jsx(k,{label:"Prompt",children:e.jsx("div",{className:"p-1",children:t.messages.map((r,s)=>e.jsx(K,{message:r},s))})}),e.jsx(k,{label:"Options",children:e.jsx("pre",{className:"m-0",children:JSON.stringify(t.options,void 0,2)})})]});case"startComplete":return e.jsxs(e.Fragment,{children:[e.jsx(k,{label:"Prompt",children:e.jsx("pre",{className:"m-0",children:t.prompt})}),e.jsx(k,{label:"Options",children:e.jsx("pre",{className:"m-0",children:JSON.stringify(t.options,void 0,2)})})]});case"startFim":return e.jsxs(e.Fragment,{children:[e.jsx(k,{label:"Prefix",children:e.jsx("pre",{className:"m-0",children:t.prefix})}),e.jsx(k,{label:"Suffix",children:e.jsx("pre",{className:"m-0",children:t.suffix})}),e.jsx(k,{label:"Options",children:e.jsx("pre",{className:"m-0",children:JSON.stringify(t.options,void 0,2)})})]})}})()})}function B({interaction:t}){if(t.end)switch(t.end.kind){case"success":return e.jsx(A,{className:"relative top-[2px] -mt-[2px] h-[16px] w-[16px] pr-[2px] text-[color:var(--vscode-charts-green)]"});case"cancel":return e.jsx(G,{className:"relative top-[2px] -mt-[2px] h-[16px] w-[16px] pr-[2px] text-[color:var(--vscode-list-warningForeground)]"});case"error":return e.jsx(P,{className:"relative top-[2px] -mt-[2px] h-[16px] w-[16px] pr-[2px] text-[color:var(--vscode-list-errorForeground)]"})}else return e.jsx(U,{className:"relative top-[2px] -mt-[2px] h-[16px] w-[16px] pr-[2px]"})}function E(t){return e.jsx("div",{className:"border-0 border-r-2 border-solid border-[color:var(--vscode-panel-border)] pl-2 pr-2 text-sm",children:t})}function j({label:t,value:r,format:s}){return E(r!=null?`${t}: ${s?s(r):r}`:"")}function te({children:t}){return E(t)}function R(t){return(t/1e3).toFixed(2)+"s"}function re({interaction:t}){const r=p.useRef(null),s=p.useRef(null),o=W(t),[n,l]=p.useState(!0);function c(){const a=r.current;if(!a)return;l(a.scrollHeight-a.scrollTop-a.clientHeight<5)}return p.useEffect(()=>{var i;if(t.end)return;const a=t.results[t.results.length-1];if(a!=s.current&&(s.current=a,n)){const m=(i=r.current)==null?void 0:i.lastChild;m&&m.scrollIntoView({behavior:"auto",block:"end"})}},[t,n]),e.jsxs("div",{className:"m-0 flex min-w-0 flex-1 shrink grow flex-col",children:[e.jsxs("div",{className:"shrink-0 text-base",children:[e.jsxs("div",{className:"columns-3 gap-0 border-0 border-b-2 border-solid border-[color:var(--vscode-panel-border)] p-0",children:[e.jsx(j,{label:"Type",value:o.type}),e.jsxs(te,{children:["Result: ",e.jsx(B,{interaction:t}),o.result]})]}),e.jsxs("div",{className:"columns-3 gap-0 border-0 border-b-2 border-solid border-[color:var(--vscode-panel-border)] p-0",children:[e.jsx(j,{label:"Prompt Tokens",value:o.promptTokens}),e.jsx(j,{label:"Generated Tokens",value:o.generatedTokens}),e.jsx(j,{label:"ThinkingTokens",value:o.thinkingTokens})]}),e.jsxs("div",{className:"columns-3 gap-0 border-0 border-b-2 border-solid border-[color:var(--vscode-panel-border)] p-0",children:[e.jsx(j,{label:"Total Time",value:o.totalTime,format:R}),e.jsx(j,{label:"To First Token",value:o.toFirstToken,format:R}),e.jsx(j,{label:"Tokens/s",value:o.tokensPerSecond,format:a=>a.toFixed(1)})]})]}),e.jsxs("div",{ref:r,className:"grow overflow-auto",onScroll:c,children:[t.start?e.jsx(ee,{item:t.start}):"",e.jsx("div",{className:"whitespace-pre-wrap p-2",children:t.results.map((a,i)=>e.jsx(Z,{group:a},i))}),t.end?e.jsx(Y,{item:t.end}):""]})]})}function se(t){const r=new Date(t),s=r.getHours().toString().padStart(2,"0"),o=r.getMinutes().toString().padStart(2,"0"),n=r.getSeconds(),l=r.getMilliseconds(),c=`${n}.${Math.floor(l/100)}`;return`${s}:${o}:${c.padStart(4,"0")}`}function oe({interactionId:t,interaction:r,onClickInteraction:s,selected:o}){const n=W(r);return e.jsxs("li",{className:"w-full cursor-pointer pb-[3px] pl-[4px] pr-[4px] pt-[3px] "+(o?"bg-[color:var(--vscode-list-inactiveSelectionBackground)] text-[color:var(--vscode-list-inctiveSelectionForeground)] group-focus-within:bg-[color:var(--vscode-list-activeSelectionBackground)] group-focus-within:text-[color:var(--vscode-list-activeSelectionForeground)]":"hover:bg-[color:var(--vscode-list-inactiveSelectionBackground)]"),onClick:()=>s(t),children:[e.jsx(B,{interaction:r})," ",e.jsx("span",{className:"inline-block w-[70px]",children:r.start?se(r.start.timestamp):""}),e.jsx("span",{className:"inline-block",children:n.type})]},t)}function ne({llmLog:t,onClickInteraction:r}){const s=p.useRef(null),[o,n]=p.useState(void 0),l=p.useRef(0);return p.useEffect(()=>{var c;if(t.order.length!=l.current){n(t.order[t.order.length-1]),r(t.order[t.order.length-1]),l.current=t.order.length;const a=(c=s.current)==null?void 0:c.lastChild;a&&a.scrollIntoView({behavior:"smooth",block:"end"})}}),e.jsx("ul",{tabIndex:1,ref:s,className:"group m-0 w-[150px] flex-none list-none overflow-auto border-0 border-r-2 border-solid border-[color:var(--vscode-panel-border)] p-0",children:t.order.map(c=>e.jsx(oe,{interactionId:c,interaction:t.interactions.get(c),onClickInteraction:a=>{var i;(i=s.current)==null||i.focus(),n(a),r(a)},selected:c==o},c))})}function ce(t){return p.useMemo(()=>{var h,f,x,g,b;let r=0,s=0,o=0,n=0,l=0,c=0,a=0,i=0,m=0,d=0;const u=[];for(const v of t.interactions.values())if(v.end){if(c++,r+=v.end.promptTokens||0,s+=v.end.generatedTokens||0,o+=v.end.thinkingTokens||0,v.end.usage){const w=v.end.usage;if(n+=((h=w.promptTokensDetails)==null?void 0:h.cachedTokens)||0,l+=((f=w.promptTokensDetails)==null?void 0:f.cacheWriteTokens)||0,(x=v.start)!=null&&x.provider&&((b=(g=v.start)==null?void 0:g.options)!=null&&b.model)){const T=I(v.start.provider,v.start.options.model,w);T&&(d+=T.cost,u.push(T))}}switch(v.end.kind){case"success":a++;break;case"error":i++;break;case"cancel":m++;break}}return{totalPromptTokens:r,totalGeneratedTokens:s,totalThinkingTokens:o,totalCachedTokens:n,totalCacheWriteTokens:l,totalInteractions:c,totalSuccessfulInteractions:a,totalErrorInteractions:i,totalCancelledInteractions:m,totalCost:d,costBreakdowns:u}},[t])}const C=({label:t,value:r,color:s="var(--vscode-foreground)"})=>e.jsxs("div",{className:"flex flex-col items-center rounded-lg border border-[color:var(--vscode-panel-border)] bg-[color:var(--vscode-editor-background)] p-3",children:[e.jsx("div",{className:"text-sm text-[color:var(--vscode-descriptionForeground)]",children:t}),e.jsx("div",{className:"text-lg font-semibold",style:{color:s},children:r.toLocaleString()})]}),ae=({llmLog:t})=>{const r=p.useMemo(()=>{let d=0;const u=[];return t.order.forEach((h,f)=>{var g,b,v,w;const x=t.interactions.get(h);if((g=x==null?void 0:x.end)!=null&&g.usage&&((b=x.start)!=null&&b.provider)&&((w=(v=x.start)==null?void 0:v.options)!=null&&w.model)){const T=I(x.start.provider,x.start.options.model,x.end.usage);T&&(d+=T.cost)}u.push({interaction:f+1,cost:d})}),u},[t.order,t.interactions]);if(r.length===0||r[r.length-1].cost===0)return null;const s=Math.max(...r.map(d=>d.cost)),o=r.length,n=400,l=200,c=40,a=d=>(d-1)/(o-1)*(n-2*c)+c,i=d=>l-c-d/s*(l-2*c),m=r.map((d,u)=>`${u===0?"M":"L"} ${a(d.interaction)} ${i(d.cost)}`).join(" ");return e.jsxs("div",{className:"mb-4 rounded-lg border border-[color:var(--vscode-panel-border)] bg-[color:var(--vscode-editor-background)] p-4",children:[e.jsx("h3",{className:"mb-3 text-sm font-semibold text-[color:var(--vscode-foreground)]",children:"Cumulative Cost Over Interactions"}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("svg",{width:n,height:l,className:"overflow-visible",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 20 0 L 0 0 0 20",fill:"none",stroke:"var(--vscode-panel-border)",strokeWidth:"0.5",opacity:"0.3"})})}),e.jsx("rect",{width:n,height:l,fill:"url(#grid)"}),e.jsx("rect",{x:c,y:c,width:n-2*c,height:l-2*c,fill:"var(--vscode-editor-background)",stroke:"var(--vscode-panel-border)",strokeWidth:"1"}),e.jsx("path",{d:m,fill:"none",stroke:"var(--vscode-charts-green)",strokeWidth:"2",strokeLinecap:"round"}),r.map((d,u)=>e.jsx("circle",{cx:a(d.interaction),cy:i(d.cost),r:"3",fill:"var(--vscode-charts-green)",stroke:"var(--vscode-editor-background)",strokeWidth:"1"},u)),[0,.25,.5,.75,1].map(d=>{const u=s*d,h=i(u);return e.jsxs("g",{children:[e.jsx("line",{x1:c-5,y1:h,x2:c,y2:h,stroke:"var(--vscode-foreground)",strokeWidth:"1"}),e.jsxs("text",{x:c-8,y:h+4,textAnchor:"end",fontSize:"10",fill:"var(--vscode-descriptionForeground)",children:["$",u.toFixed(4)]})]},d)}),[0,.25,.5,.75,1].map(d=>{const u=Math.round(1+d*(o-1)),h=a(u);return e.jsxs("g",{children:[e.jsx("line",{x1:h,y1:l-c,x2:h,y2:l-c+5,stroke:"var(--vscode-foreground)",strokeWidth:"1"}),e.jsx("text",{x:h,y:l-c+18,textAnchor:"middle",fontSize:"10",fill:"var(--vscode-descriptionForeground)",children:u})]},d)}),e.jsx("text",{x:n/2,y:l-5,textAnchor:"middle",fontSize:"12",fill:"var(--vscode-foreground)",children:"Interaction Number"}),e.jsx("text",{x:15,y:l/2,textAnchor:"middle",fontSize:"12",fill:"var(--vscode-foreground)",transform:`rotate(-90 15 ${l/2})`,children:"Cumulative Cost ($)"})]})})]})},le=({llmLog:t})=>{const r=ce(t),[s,o]=p.useState(!1);return e.jsxs("div",{className:"border-b border-[color:var(--vscode-panel-border)] p-4",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-[color:var(--vscode-foreground)]",children:"Total Usage Summary"}),e.jsxs("div",{className:"flex items-center gap-4",children:[r.totalCost>0&&e.jsxs("button",{onClick:()=>o(!s),className:"cursor-pointer text-lg font-semibold text-[color:var(--vscode-charts-green)] hover:text-[color:var(--vscode-charts-blue)]",children:["$",r.totalCost.toFixed(6)]}),e.jsxs("div",{className:"text-sm text-[color:var(--vscode-descriptionForeground)]",children:[r.totalInteractions," interactions"]})]})]}),s&&r.costBreakdowns.length>0&&e.jsxs("div",{className:"mb-4 max-h-32 overflow-y-auto rounded border border-[color:var(--vscode-panel-border)] bg-[color:var(--vscode-editor-background)] p-3",children:[e.jsx("h3",{className:"mb-2 text-sm font-semibold text-[color:var(--vscode-foreground)]",children:"Cost Breakdown"}),e.jsx("div",{className:"space-y-2 text-xs",children:r.costBreakdowns.map((n,l)=>e.jsx("div",{className:"border-b border-[color:var(--vscode-panel-border)] pb-2 last:border-b-0",children:e.jsx("pre",{className:"whitespace-pre-wrap text-[color:var(--vscode-descriptionForeground)]",children:n.breakdown})},l))})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3 md:grid-cols-4",children:[e.jsx(C,{label:"Input Tokens",value:r.totalPromptTokens,color:"var(--vscode-charts-blue)"}),e.jsx(C,{label:"Output Tokens",value:r.totalGeneratedTokens,color:"var(--vscode-charts-green)"}),e.jsx(C,{label:"Thinking Tokens",value:r.totalThinkingTokens,color:"var(--vscode-charts-purple)"}),e.jsx(C,{label:"Cache Read",value:r.totalCachedTokens,color:"var(--vscode-charts-orange)"})]}),r.totalCost>0&&e.jsxs(e.Fragment,{children:[e.jsx(ae,{llmLog:t}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-col items-center rounded-lg border border-[color:var(--vscode-panel-border)] bg-[color:var(--vscode-editor-background)] p-3",children:[e.jsx("div",{className:"text-sm text-[color:var(--vscode-descriptionForeground)]",children:"Total Cost"}),e.jsxs("div",{className:"text-2xl font-bold text-[color:var(--vscode-charts-green)]",children:["$",r.totalCost.toFixed(6)]}),e.jsxs("div",{className:"text-xs text-[color:var(--vscode-descriptionForeground)]",children:[r.costBreakdowns.length," cost calculations"]})]})})]}),r.totalCacheWriteTokens>0&&e.jsxs("div",{className:"mb-4 grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx(C,{label:"Cache Write",value:r.totalCacheWriteTokens,color:"var(--vscode-charts-red)"}),e.jsx("div",{className:"flex items-center justify-center rounded-lg border border-[color:var(--vscode-panel-border)] bg-[color:var(--vscode-editor-background)] p-3",children:e.jsxs("div",{className:"text-sm text-[color:var(--vscode-descriptionForeground)]",children:["Cache Hit Rate:"," ",r.totalPromptTokens>0?(r.totalCachedTokens/r.totalPromptTokens*100).toFixed(1):"0","%"]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{className:"rounded border border-[color:var(--vscode-panel-border)] bg-[color:var(--vscode-editor-background)] p-2 text-center",children:[e.jsx("div",{className:"text-[color:var(--vscode-charts-green)]",children:r.totalSuccessfulInteractions}),e.jsx("div",{className:"text-[color:var(--vscode-descriptionForeground)]",children:"Success"})]}),e.jsxs("div",{className:"rounded border border-[color:var(--vscode-panel-border)] bg-[color:var(--vscode-editor-background)] p-2 text-center",children:[e.jsx("div",{className:"text-[color:var(--vscode-charts-red)]",children:r.totalErrorInteractions}),e.jsx("div",{className:"text-[color:var(--vscode-descriptionForeground)]",children:"Error"})]}),e.jsxs("div",{className:"rounded border border-[color:var(--vscode-panel-border)] bg-[color:var(--vscode-editor-background)] p-2 text-center",children:[e.jsx("div",{className:"text-[color:var(--vscode-charts-yellow)]",children:r.totalCancelledInteractions}),e.jsx("div",{className:"text-[color:var(--vscode-descriptionForeground)]",children:"Cancelled"})]})]})]})};function de(){const t=q(),[r,s]=p.useState(void 0),[o,n]=p.useState(!1),l=r?t.interactions.get(r):void 0;return t.loading?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"flex h-full w-full",children:[e.jsx("div",{className:"flex h-full w-full flex-col",children:e.jsxs("div",{className:"flex min-h-0 flex-1 overflow-hidden",children:[e.jsx(ne,{llmLog:t,onClickInteraction:c=>{s(c)}}),l&&e.jsx(re,{interaction:l},"{selectedId}")]})}),o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"relative h-full w-full max-w-6xl overflow-hidden bg-[color:var(--vscode-panel-background)] shadow-2xl",children:[e.jsx("button",{onClick:()=>n(!1),className:"absolute right-4 top-4 z-10 flex h-8 w-8 items-center justify-center rounded-full bg-[color:var(--vscode-button-background)] text-[color:var(--vscode-button-foreground)] transition-colors hover:bg-[color:var(--vscode-button-hoverBackground)]",children:"×"}),e.jsx("div",{className:"h-full overflow-y-auto p-6",children:e.jsx(le,{llmLog:t})})]})})]})}(async()=>z.createRoot(document.getElementById("root")).render(e.jsx(_.StrictMode,{children:e.jsx(de,{})})))();
//# sourceMappingURL=indexConsole.js.map
